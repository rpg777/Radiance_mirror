# SCCSid "$SunId$ LBL"

#
#  Compiles for octree conversion program
#
#     The compile define "STRICT" enforces strict intersection calculations
#  so that no cube which does not intersect an object contains that object.
#  Otherwise, a somewhat faster more lax approach is taken by certain routines.
#

OPT = -O
MACH = -DBSD -DSTRUCTASSIGN -f68881 /usr/lib/libm.il
CFLAGS = -DSTRICT $(OPT) $(MACH)

LIBDIR = /usr/local/lib/ray

INSTDIR = /lumen/lumen/ray/bin.sun3

all:	oconv getbbox

oconv:	oconv.o sphere.o writeoct.o o_face.o plocate.o \
clip.o o_cone.o o_instance.o bbox.o initotypes.o
	cc $(CFLAGS) -o oconv oconv.o writeoct.o sphere.o o_face.o \
plocate.o clip.o o_cone.o o_instance.o bbox.o \
initotypes.o ../common/librt.a -lm

getbbox:	getbbox.o readobj2.o bbox.o initotypes2.o
	cc $(CFLAGS) -o getbbox getbbox.o readobj2.o \
bbox.o initotypes2.o ../common/librt.a -lm

install:	oconv getbbox
	cp oconv getbbox $(INSTDIR)

clean:
	set nonomatch; rm -f oconv *.o core

oconv.o:	oconv.c
	cc $(CFLAGS) -DDEFPATH=\":$(LIBDIR)\" -c oconv.c

bbox.o initotypes.o o_cone.o o_face.o \
o_instance.o oconv.o sphere.o writeoct.o:	standard.h mat4.h fvect.h

initotypes.o o_cone.o o_face.o oconv.o \
sphere.o writeoct.o:	octree.h

bbox.o o_cone.o o_face.o o_instance.o oconv.o \
sphere.o writeoct.o:	object.h

bbox.o initotypes.o oconv.o \
sphere.o writeoct.o:	otypes.h

bbox.o o_cone.o:	cone.h

bbox.o o_face.o:	face.h

bbox.o o_instance.o:	instance.h octree.h

clip.o o_face.o plocate.o:	plocate.h
