# SCCSid "$SunId$ LBL"

#
# Makefile for object generation programs
#

OPT = -O
MACH = -DBSD
CFLAGS = $(MACH) $(OPT) -I../common -L../lib
CC = cc

INSTDIR = /usr/local/bin

LIBDIR = /usr/local/lib/ray

PROGS = genbox gensky xform genblinds genrev genworm \
		gensurf genprism replmarks mkillum

CALFILES = illum.cal rev.cal skybright.cal surf.cal

all:	$(PROGS)

install:	$(PROGS) genpine.csh genwindow.csh $(CALFILES)
	cp $(PROGS) $(INSTDIR)
	cp genwindow.csh $(INSTDIR)/genwindow
	chmod 755 $(INSTDIR)/genwindow
	cd $(LIBDIR) ; rm -f $(CALFILES)
	cp $(CALFILES) $(LIBDIR)

clean:
	set nonomatch; rm -f $(PROGS) *.o core

genbeads:	genbeads.o hermite3.o
	$(CC) $(CFLAGS) -o genbeads genbeads.o hermite3.o -lm

genbox:	genbox.o
	$(CC) $(CFLAGS) -o genbox genbox.o

genmarble:	genmarble.o ../common/random.h
	$(CC) $(CFLAGS) -o genmarble genmarble.o -lm

gensky:	gensky.o sun.o
	$(CC) $(CFLAGS) -o gensky gensky.o sun.o -lm

genblinds:	genblinds.o
	$(CC) $(CFLAGS) -o genblinds genblinds.o -lm

genprism:	genprism.o
	$(CC) $(CFLAGS) -o genprism genprism.o

xform:	xform.o
	$(CC) $(CFLAGS) -o xform xform.o -lrt -lm

replmarks:	replmarks.o
	$(CC) $(CFLAGS) -o replmarks replmarks.o -lrt -lm

mkillum:	mkillum.o mkillum2.o mkillum3.o
	$(CC) $(CFLAGS) -o mkillum mkillum.o mkillum2.o mkillum3.o -lrt -lm

genrev:	genrev.o 
	$(CC) $(CFLAGS) -o genrev genrev.o -lrt -lm

genworm:	genworm.o
	$(CC) $(CFLAGS) -o genworm genworm.o -lrt -lm

gensurf:	gensurf.o
	$(CC) $(CFLAGS) -o gensurf gensurf.o -lrt -lm

genbranch:	genbranch.o
	$(CC) $(CFLAGS) -o genbranch genbranch.o -lm

gensurf.o:	../common/standard.h ../common/mat4.h ../common/fvect.h

genworm.o replmarks.o:	../common/fvect.h

xform.o:	../common/standard.h ../common/mat4.h ../common/fvect.h \
../common/otypes.h ../common/object.h

mkillum.o mkillum2.o mkillum3.o:	mkillum.h ../common/standard.h \
../common/mat4.h ../common/fvect.h ../common/otypes.h ../common/object.h

gensky.o:	../common/color.h
